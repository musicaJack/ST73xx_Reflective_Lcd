# ST73xx åå°„å¼æ¶²æ™¶æ˜¾ç¤ºé©±åŠ¨åº“

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Raspberry%20Pi%20Pico-red.svg)](https://www.raspberrypi.com/products/raspberry-pi-pico/)
[![Version](https://img.shields.io/badge/Version-2.0.0-green.svg)](https://github.com/musicaJack/ST7305_2.9_Reflective_Lcd/releases)

[English](README.md) | ä¸­æ–‡

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºæ ‘è“æ´¾Picoè®¾è®¡çš„ST7305å’ŒST7306åå°„å¼LCDæ˜¾ç¤ºå±çš„ç»¼åˆæ€§é«˜æ€§èƒ½é©±åŠ¨åº“ã€‚è¯¥åº“æä¾›äº†å®Œæ•´çš„å›¾å½¢æ¡†æ¶ï¼ŒåŒ…å«ç¡¬ä»¶æŠ½è±¡å±‚ã€ä¼˜åŒ–æ¸²æŸ“å¼•æ“å’Œæ˜“äºä½¿ç”¨çš„APIæ¥å£ã€‚
<p align="center">
  <img src="imgs/analog_clock.jpg" alt="affect1" width="300"/>
  <img src="imgs/maze_game.jpg" alt="affect2" width="300"/>
</p>
## âœ¨ ç‰¹æ€§

- **å¤šè®¾å¤‡æ”¯æŒ**ï¼šå®Œæ•´æ”¯æŒST7305å’ŒST7306åå°„å¼æ¶²æ™¶æ˜¾ç¤ºæ§åˆ¶å™¨
- **å›¾å½¢æ¡†æ¶**ï¼šå®Œæ•´çš„UIæŠ½è±¡å±‚ï¼Œé‡‡ç”¨Adafruit GFXé£æ ¼çš„API
- **é«˜çº§å›¾å½¢**ï¼šå†…ç½®å›¾å½¢ç»˜åˆ¶åŠŸèƒ½ï¼Œæ”¯æŒå½¢çŠ¶ã€çº¿æ¡ã€æ–‡æœ¬å’Œå¤æ‚åŠ¨ç”»
- **æ¨¡æ¿è®¾è®¡**ï¼šç°ä»£C++æ¨¡æ¿æ¶æ„ï¼Œç¡®ä¿ç±»å‹å®‰å…¨å’Œé«˜æ€§èƒ½
- **ç¡¬ä»¶æŠ½è±¡**ï¼šç¡¬ä»¶é©±åŠ¨ä¸å›¾å½¢æ¸²æŸ“çš„æ¸…æ™°åˆ†ç¦»
- **ä¼˜åŒ–SPI**ï¼šé«˜æ€§èƒ½SPIé€šä¿¡ï¼Œæ”¯æŒå¯é…ç½®å‚æ•°
- **å­—ä½“ç³»ç»Ÿ**ï¼šå†…ç½®å­—ä½“æ”¯æŒï¼Œå¯è‡ªå®šä¹‰å¸ƒå±€å’Œå¤§å°
- **é¢œè‰²ç®¡ç†**ï¼šæ”¯æŒç°åº¦å’Œå•è‰²æ¸²æŸ“æ¨¡å¼
- **æ—‹è½¬æ”¯æŒ**ï¼šæ˜¾ç¤ºæ—‹è½¬å’Œåæ ‡å˜æ¢
- **ç”µæºç®¡ç†**ï¼šä½åŠŸè€—å’Œé«˜åŠŸè€—æ¨¡å¼ï¼Œæé«˜èƒ½æºæ•ˆç‡

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

é¡¹ç›®é‡‡ç”¨ç°ä»£æ¨¡å—åŒ–è®¾è®¡ï¼Œå…·æœ‰æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼š

### æ ¸å¿ƒç»„ä»¶

- **ç¡¬ä»¶é©±åŠ¨** (`st7305_driver.cpp`, `st7306_driver.cpp`)ï¼šåº•å±‚æ˜¾ç¤ºæ§åˆ¶å™¨å®ç°
- **UIæŠ½è±¡å±‚** (`st73xx_ui.cpp/hpp`)ï¼šç¡¬ä»¶æ— å…³çš„å›¾å½¢æ¥å£ (Adafruit GFXé£æ ¼)
- **å›¾å½¢å¼•æ“** (`pico_display_gfx.hpp/inl`)ï¼šåŸºäºæ¨¡æ¿çš„å›¾å½¢æ¸²æŸ“å¼•æ“
- **å­—ä½“ç³»ç»Ÿ** (`fonts/st73xx_font.cpp`)ï¼šå…¨é¢çš„å­—ä½“æ¸²æŸ“ï¼Œæ”¯æŒå¸ƒå±€é€‰é¡¹
- **ç¤ºä¾‹ç¨‹åº** (`examples/`)ï¼šå±•ç¤ºåŠŸèƒ½çš„ç»¼åˆæ¼”ç¤ºåº”ç”¨

### ç›®å½•ç»“æ„

```
â”œâ”€â”€ src/                           # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ st7305_driver.cpp         # ST7305æ§åˆ¶å™¨é©±åŠ¨
â”‚   â”œâ”€â”€ st7306_driver.cpp         # ST7306æ§åˆ¶å™¨é©±åŠ¨ (æ–°å¢)
â”‚   â”œâ”€â”€ st73xx_ui.cpp             # UIæŠ½è±¡å±‚ (æ–°å¢)
â”‚   â””â”€â”€ fonts/
â”‚       â””â”€â”€ st73xx_font.cpp       # å­—ä½“æ•°æ®å’Œæ¸²æŸ“ (å¢å¼º)
â”œâ”€â”€ include/                       # å¤´æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ st7305_driver.hpp         # ST7305é©±åŠ¨æ¥å£
â”‚   â”œâ”€â”€ st7306_driver.hpp         # ST7306é©±åŠ¨æ¥å£ (æ–°å¢)
â”‚   â”œâ”€â”€ st73xx_ui.hpp             # UIæŠ½è±¡æ¥å£ (æ–°å¢)
â”‚   â”œâ”€â”€ pico_display_gfx.hpp      # æ¨¡æ¿å›¾å½¢å¼•æ“ (æ–°å¢)
â”‚   â”œâ”€â”€ pico_display_gfx.inl      # æ¨¡æ¿å®ç° (æ–°å¢)
â”‚   â”œâ”€â”€ st73xx_font.hpp           # å­—ä½“ç³»ç»Ÿæ¥å£ (æ–°å¢)
â”‚   â””â”€â”€ gfx_colors.hpp            # é¢œè‰²å®šä¹‰ (æ–°å¢)
â”œâ”€â”€ examples/                      # ç¤ºä¾‹åº”ç”¨
â”‚   â”œâ”€â”€ st7305_demo.cpp           # ST7305ç»¼åˆæ¼”ç¤º (å¢å¼º)
â”‚   â””â”€â”€ st7306_demo.cpp           # ST7306æ¼”ç¤º (æ–°å¢)
â”œâ”€â”€ build/                         # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ CMakeLists.txt                # CMakeæ„å»ºé…ç½® (æ›´æ–°)
â””â”€â”€ build_pico.bat                # Windowsæ„å»ºè„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¡¬ä»¶è¿æ¥

#### ST7305æ˜¾ç¤ºå±è¿æ¥
```
æ ‘è“æ´¾Pico              ST7305æ˜¾ç¤ºå±
+---------------+         +---------------+
|  GPIO18 (SCK) |-------->| SCK          |
|  GPIO19 (MOSI)|-------->| MOSI         |
|  GPIO17 (CS)  |-------->| CS           |
|  GPIO20 (DC)  |-------->| DC           |
|  GPIO15 (RST) |-------->| RST          |
|  3.3V         |-------->| VCC          |
|  GND          |-------->| GND          |
+---------------+         +---------------+
```

#### ST7306æ˜¾ç¤ºå±è¿æ¥
```
æ ‘è“æ´¾Pico              ST7306æ˜¾ç¤ºå±
+---------------+         +---------------+
|  GPIO18 (SCK) |-------->| SCK          |
|  GPIO19 (MOSI)|-------->| MOSI         |
|  GPIO17 (CS)  |-------->| CS           |
|  GPIO20 (DC)  |-------->| DC           |
|  GPIO15 (RST) |-------->| RST          |
|  3.3V         |-------->| VCC          |
|  GND          |-------->| GND          |
+---------------+         +---------------+
```

### è½¯ä»¶è®¾ç½®

1. **å…‹éš†ä»“åº“ï¼š**
```bash
git clone https://github.com/musicaJack/ST73XX_Reflective_Lcd.git
cd ST73XX_Reflective_Lcd
```

2. **æ„å»ºé¡¹ç›®ï¼š**
```bash
# Windows
./build_pico.bat

# Linux/Mac
mkdir build && cd build
cmake ..
make
```

## ğŸ“ APIä½¿ç”¨æŒ‡å—

### åŸºæœ¬è®¾ç½®ï¼ˆæ¨¡æ¿æ–¹å¼ï¼‰

```cpp
#include "st7305_driver.hpp"  // æˆ– "st7306_driver.hpp"
#include "pico_display_gfx.hpp"

// ç¡¬ä»¶å¼•è„šå®šä¹‰
#define PIN_DC   20
#define PIN_RST  15
#define PIN_CS   17
#define PIN_SCLK 18
#define PIN_SDIN 19

// åˆå§‹åŒ–æ˜¾ç¤ºé©±åŠ¨
st7305::ST7305Driver display(PIN_DC, PIN_RST, PIN_CS, PIN_SCLK, PIN_SDIN);

// åˆ›å»ºå›¾å½¢ä¸Šä¸‹æ–‡
pico_gfx::PicoDisplayGFX<st7305::ST7305Driver> gfx(
    display, 
    st7305::ST7305Driver::LCD_WIDTH, 
    st7305::ST7305Driver::LCD_HEIGHT
);

// åˆå§‹åŒ–
display.initialize();
```

### å›¾å½¢æ“ä½œ

```cpp
// æ¸…å±å’ŒåŸºæœ¬æ“ä½œ
display.clearDisplay();
gfx.fillScreen(WHITE);

// ç»˜åˆ¶åŸºæœ¬å›¾å½¢
gfx.drawPixel(x, y, BLACK);
gfx.drawLine(10, 10, 100, 10, BLACK);
gfx.drawRectangle(20, 20, 50, 30, BLACK);
gfx.drawFilledRectangle(30, 30, 40, 20, BLACK);
gfx.drawCircle(60, 60, 15, BLACK);
gfx.drawFilledCircle(80, 80, 20, BLACK);
gfx.drawTriangle(10, 10, 50, 10, 30, 40, BLACK);

// æ–‡æœ¬æ¸²æŸ“
display.drawString(10, 10, "ä½ å¥½ä¸–ç•Œ!", BLACK);
display.drawChar(x, y, 'A', BLACK);

// æ˜¾ç¤ºæ—‹è½¬
gfx.setRotation(1);  // 0: 0Â°, 1: 90Â°, 2: 180Â°, 3: 270Â°
display.setRotation(1);

// æ›´æ–°æ˜¾ç¤º
display.display();
```

### é«˜çº§åŠŸèƒ½

```cpp
// ST7306ç°åº¦æ”¯æŒï¼ˆ4çº§ï¼‰
st7306::ST7306Driver display306(/*å¼•è„š*/);
display306.drawPixelGray(x, y, st7306::ST7306Driver::COLOR_GRAY1);
display306.drawPixelGray(x, y, st7306::ST7306Driver::COLOR_GRAY2);

// å­—ä½“å¸ƒå±€é…ç½®
display.setFontLayout(st7306::FontLayout::Horizontal);
display.setFontLayout(st7306::FontLayout::Vertical);

// ç”µæºç®¡ç†
display.lowPowerMode();
display.highPowerMode();
display.displaySleep(true);
display.displayOn(false);
```

### é«˜çº§å›¾å½¢ç¤ºä¾‹

```cpp
// å¤æ‚åŠ¨ç”»ç¤ºä¾‹
void windmillAnimation() {
    const int CENTER_X = gfx.width() / 2;
    const int CENTER_Y = gfx.height() / 2;
    const int BLADE_COUNT = 3;
    const int BLADE_LENGTH = 60;
    
    for (float angle = 0; angle < 2 * M_PI; angle += 0.1) {
        gfx.fillScreen(WHITE);
        
        // ç»˜åˆ¶é£è½¦å¶ç‰‡
        for (int i = 0; i < BLADE_COUNT; i++) {
            float blade_angle = angle + (i * 2 * M_PI / BLADE_COUNT);
            int end_x = CENTER_X + BLADE_LENGTH * cos(blade_angle);
            int end_y = CENTER_Y + BLADE_LENGTH * sin(blade_angle);
            
            gfx.drawLine(CENTER_X, CENTER_Y, end_x, end_y, BLACK);
        }
        
        // ç»˜åˆ¶ä¸­å¿ƒè½®æ¯‚
        gfx.drawFilledCircle(CENTER_X, CENTER_Y, 5, BLACK);
        
        display.display();
        sleep_ms(50);
    }
}
```

## ğŸ†• ç‰ˆæœ¬2.0æ–°ç‰¹æ€§

### ä¸»è¦å¢å¼ºåŠŸèƒ½

1. **ST7306æ”¯æŒ**ï¼šæ–°å¢å¯¹ST7306æ§åˆ¶å™¨çš„å®Œæ•´æ”¯æŒï¼ŒåŒ…å«4çº§ç°åº¦æ˜¾ç¤º
2. **UIæŠ½è±¡å±‚**ï¼šå—Adafruit GFXå¯å‘çš„å…¨æ–°ç¡¬ä»¶æ— å…³å›¾å½¢æ¥å£
3. **æ¨¡æ¿æ¶æ„**ï¼šç°ä»£C++æ¨¡æ¿è®¾è®¡ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œç±»å‹å®‰å…¨æ€§
4. **å¢å¼ºå­—ä½“ç³»ç»Ÿ**ï¼šæ”¹è¿›çš„å­—ä½“æ¸²æŸ“ï¼Œæ”¯æŒå¸ƒå±€é€‰é¡¹å’Œæ›´å¥½çš„æ€§èƒ½
5. **é«˜çº§å›¾å½¢**ï¼šå¤æ‚å½¢çŠ¶ç»˜åˆ¶ã€å¤šè¾¹å½¢æ”¯æŒå’ŒåŠ¨ç”»èƒ½åŠ›
6. **åŒç›®æ ‡æ„å»º**ï¼šæ”¯æŒåŒæ—¶æ„å»ºST7305å’ŒST7306ç¤ºä¾‹

### APIæ”¹è¿›

- **ç»Ÿä¸€æ¥å£**ï¼šä¸åŒæ˜¾ç¤ºæ§åˆ¶å™¨é—´çš„ä¸€è‡´API
- **æ›´å¥½çš„å‘½å**ï¼šæ›´ç›´è§‚çš„å‡½æ•°åç§°å’Œä¸€è‡´çš„å‚æ•°é¡ºåº
- **å¢å¼ºæ–‡æ¡£**ï¼šå…¨é¢çš„å†…è”æ–‡æ¡£å’Œç¤ºä¾‹
- **é”™è¯¯å¤„ç†**ï¼šæ”¹è¿›çš„é”™è¯¯æ£€æŸ¥å’ŒéªŒè¯

### æ€§èƒ½ä¼˜åŒ–

- **ä¼˜åŒ–SPI**ï¼šæ›´å¿«çš„é€šä¿¡ï¼Œå‡å°‘å¼€é”€
- **å†…å­˜æ•ˆç‡**ï¼šæ›´å¥½çš„ç¼“å†²åŒºç®¡ç†å’Œå‡å°‘å†…å­˜å ç”¨
- **æ¸²æŸ“é€Ÿåº¦**ï¼šä¼˜åŒ–çš„ç»˜åˆ¶ç®—æ³•ï¼Œå®ç°æ›´å¿«çš„æ›´æ–°

## ğŸ”§ æ„å»ºç›®æ ‡

é¡¹ç›®ç°åœ¨æ”¯æŒå¤šä¸ªæ„å»ºç›®æ ‡ï¼š

- `ST7305_Display`ï¼šST7305æ¼”ç¤ºåº”ç”¨ç¨‹åº
- `ST7306_Display`ï¼šST7306æ¼”ç¤ºåº”ç”¨ç¨‹åº
- `st7306_fullscreen_text_demo`ï¼šST7306æ»¡å±æ–‡å­—æ˜¾ç¤ºæ¼”ç¤ºï¼ˆ792å­—ç¬¦ï¼Œ22è¡Œï¼‰
- `AnalogClockWiFi`ï¼šæ”¯æŒWiFiçš„NTPæ—¶é’Ÿ
- `MazeGame`ï¼šäº¤äº’å¼è¿·å®«æ¸¸æˆæ¼”ç¤º

æ¯ä¸ªç›®æ ‡éƒ½åŒ…å«å±•ç¤ºç›¸åº”æ§åˆ¶å™¨åŠŸèƒ½çš„ç»¼åˆç¤ºä¾‹ã€‚

## ğŸ“Š ST7306 æ»¡å±æ–‡å­—æ˜¾ç¤º

### æŠ€æœ¯è§„æ ¼

ST7306åå°„å¼LCDæ˜¾ç¤ºå™¨é€šè¿‡ä¼˜åŒ–çš„è¾¹ç•Œé…ç½®å®ç°äº†æ›´é«˜çš„æ–‡å­—å¯†åº¦ï¼š

#### ç¡¬ä»¶å‚æ•°
- **ç‰©ç†åˆ†è¾¨ç‡**: 300Ã—400åƒç´ 
- **ç¼“å†²åŒºå¤§å°**: 150Ã—200å­—èŠ‚ï¼ˆ30KBï¼‰
- **åƒç´ å­˜å‚¨æ–¹å¼**: æ¯ä¸ªå­—èŠ‚å­˜å‚¨4ä¸ªåƒç´ ï¼ˆ2Ã—2åƒç´ å—ï¼‰
- **ç°åº¦æ”¯æŒ**: 4çº§ç°åº¦ï¼ˆ0-3ï¼‰
- **æ˜¾ç¤ºç±»å‹**: åå°„å¼LCDï¼Œæ— éœ€èƒŒå…‰

#### å­—ä½“è§„æ ¼
- **å­—ä½“å¤§å°**: 8Ã—16åƒç´ 
- **è¡Œé—´è·**: 18åƒç´ ï¼ˆ16åƒç´ å­—ä½“ + 2åƒç´ é—´è·ï¼‰
- **å­—ç¬¦é—´è·**: 0åƒç´ ï¼ˆå­—ç¬¦é—´æ— é¢å¤–é—´è·ï¼‰

#### å­—ç¬¦å®¹é‡è®¡ç®—

**æ°´å¹³æ–¹å‘å­—ç¬¦æ•°é‡:**
```
å¯ç”¨å®½åº¦ = LCD_WIDTH - è¾¹è· = 300 - 10 = 290åƒç´ 
æ¯å­—ç¬¦å®½åº¦ = 8åƒç´ 
æœ€å¤§å­—ç¬¦æ•° = 290 Ã· 8 = 36.25 â†’ 36ä¸ªå­—ç¬¦/è¡Œ
```

**å‚ç›´æ–¹å‘è¡Œæ•°:**
```
å¯ç”¨é«˜åº¦ = LCD_HEIGHT - è¾¹è· = 400 - 10 = 390åƒç´ 
æ¯è¡Œé«˜åº¦ = 18åƒç´ ï¼ˆ16åƒç´ å­—ä½“ + 2åƒç´ é—´è·ï¼‰
æœ€å¤§è¡Œæ•° = 390 Ã· 18 = 21.67 â†’ 22è¡Œï¼ˆæé™ï¼‰
```

**æ€»å­—ç¬¦å®¹é‡:**
```
æ ‡å‡†é…ç½®: 36 Ã— 21 = 756ä¸ªå­—ç¬¦
æé™é…ç½®: 36 Ã— 22 = 792ä¸ªå­—ç¬¦
```

#### writePointGrayçš„ç°åº¦ä¼˜åŠ¿

**ç°åº¦çº§åˆ«:**
- **0çº§**: å®Œå…¨é€æ˜/ç™½è‰²
- **1çº§**: æµ…ç°è‰²
- **2çº§**: æ·±ç°è‰²
- **3çº§**: å®Œå…¨é»‘è‰²

**å­—ç¬¦æ˜¾ç¤ºæ•ˆæœ:**
- æ¯ä¸ªå­—ç¬¦çš„8Ã—16åƒç´ éƒ½å¯ä»¥ç‹¬ç«‹è®¾ç½®4çº§ç°åº¦
- å¯ä»¥å®ç°æ›´ä¸°å¯Œçš„æ–‡å­—æ¸²æŸ“æ•ˆæœ
- æ”¯æŒæŠ—é”¯é½¿å’Œå­—ä½“å¹³æ»‘

#### è¾¹ç•Œä¼˜åŒ–

**åŸå§‹è¾¹ç•Œæ£€æŸ¥:**
```cpp
if (y + font::FONT_HEIGHT <= LCD_HEIGHT - MARGIN)
```

**ä¼˜åŒ–è¾¹ç•Œæ£€æŸ¥:**
```cpp
if (y + font::FONT_HEIGHT <= LCD_HEIGHT)
```

**æ•ˆæœ**: å…è®¸ç¬¬22è¡Œæ˜¾ç¤ºï¼Œå¢åŠ 36ä¸ªå­—ç¬¦å®¹é‡

#### æ€§èƒ½æŒ‡æ ‡

| é…ç½®æ–¹æ¡ˆ | å­—ç¬¦æ•° | æ˜¾ç¤ºæ•ˆç‡ | è§†è§‰æ•ˆæœ | é€‚ç”¨åœºæ™¯ |
|----------|--------|----------|----------|----------|
| 21è¡Œæ ‡å‡† | 756å­—ç¬¦ | 94.5% | å®Œç¾å¯¹é½ | æ­£å¼æ–‡æ¡£ |
| 22è¡Œæé™ | 792å­—ç¬¦ | 99.0% | è½»å¾®è¶…å‡º | ä¿¡æ¯å¯†é›† |


#### æŠ€æœ¯å‚æ•°æ€»ç»“

| å‚æ•° | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| å±å¹•åˆ†è¾¨ç‡ | 300Ã—400åƒç´  | ç‰©ç†åˆ†è¾¨ç‡ |
| ç¼“å†²åŒºå¤§å° | 30KB | 150Ã—200å­—èŠ‚ |
| ç°åº¦çº§åˆ« | 4çº§ | 0-3çº§ç°åº¦ |
| å­—ä½“å¤§å° | 8Ã—16åƒç´  | æ ‡å‡†å­—ä½“ |
| æœ€å¤§å­—ç¬¦æ•° | 792å­—ç¬¦ | 22è¡ŒÃ—36å­—ç¬¦ |
| æ˜¾ç¤ºæ•ˆç‡ | 99.0% | ç©ºé—´åˆ©ç”¨ç‡ |
| å­—ç¬¦å¯†åº¦ | 6.6å­—ç¬¦/cmÂ² | ä¿¡æ¯å¯†åº¦ |

## ğŸ“Š ST7306 å±å¹•æŠ€æœ¯è§„æ ¼æ±‡æ€»

### ğŸ”§ åŸºç¡€ç¡¬ä»¶å‚æ•°

| å‚æ•° | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| å±å¹•åˆ†è¾¨ç‡ | 300Ã—400åƒç´  | å®½åº¦Ã—é«˜åº¦ |
| æ˜¾ç¤ºç±»å‹ | åå°„å¼LCD | æ— éœ€èƒŒå…‰ï¼Œç¯å¢ƒå…‰æ˜¾ç¤º |
| ç°åº¦çº§åˆ« | 4çº§ | 0x00(ç™½) â†’ 0x01(æµ…ç°) â†’ 0x02(æ·±ç°) â†’ 0x03(é»‘) |
| åƒç´ å­˜å‚¨ | 2ä½/åƒç´  | 4åƒç´ æ‰“åŒ…ä¸º1å­—èŠ‚ |
| æ˜¾ç¤ºç¼“å†²åŒº | 37.5KB | 300Ã—400Ã—2ä½Ã·8ä½ |

### ğŸ”¤ å­—ä½“æ˜¾ç¤ºå‚æ•°

| å‚æ•° | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| å­—ä½“å°ºå¯¸ | 8Ã—16åƒç´  | å®½åº¦Ã—é«˜åº¦ |
| å­—ç¬¦é—´è· | 0åƒç´  | å­—ç¬¦é—´æ— é¢å¤–é—´è· |
| è¡Œé—´è· | 2åƒç´  | è¡Œä¸è¡Œä¹‹é—´çš„é—´è· |
| æ€»è¡Œé«˜ | 18åƒç´  | å­—ä½“é«˜åº¦(16) + è¡Œé—´è·(2) |

### ğŸ“ å¸ƒå±€é…ç½®å‚æ•°

| é…ç½®ç±»å‹ | è¾¹è· | è¡Œé—´è· | æ¯è¡Œå­—ç¬¦æ•° | æœ€å¤§è¡Œæ•° | æ€»å­—ç¬¦æ•° |
|----------|------|--------|------------|----------|----------|
| æ ‡å‡†é…ç½® | 5åƒç´  | 2åƒç´  | 36å­—ç¬¦ | 21è¡Œ | 756å­—ç¬¦ |
| æé™é…ç½® | 5åƒç´  | 2åƒç´  | 36å­—ç¬¦ | 22è¡Œ | 792å­—ç¬¦ |
| æ— è¾¹è·é…ç½® | 0åƒç´  | 0åƒç´  | 37å­—ç¬¦ | 22è¡Œ | 814å­—ç¬¦ |

### ğŸ“Š è¯¦ç»†è®¡ç®—åˆ†æ

| è®¡ç®—é¡¹ç›® | å…¬å¼ | ç»“æœ | è¯´æ˜ |
|----------|------|------|------|
| å¯ç”¨å®½åº¦ | 300 - 2Ã—5 = 290åƒç´  | 290åƒç´  | å±å¹•å®½åº¦å‡å»å·¦å³è¾¹è· |
| æ¯è¡Œå­—ç¬¦æ•° | 290 Ã· 8 = 36.25 | 36å­—ç¬¦ | å‘ä¸‹å–æ•´ |
| å¯ç”¨é«˜åº¦(21è¡Œ) | 400 - 2Ã—5 = 390åƒç´  | 390åƒç´  | å±å¹•é«˜åº¦å‡å»ä¸Šä¸‹è¾¹è· |
| 21è¡Œæ‰€éœ€é«˜åº¦ | 21 Ã— 18 = 378åƒç´  | 378åƒç´  | 21è¡Œæ€»é«˜åº¦ |
| å¯ç”¨é«˜åº¦(22è¡Œ) | 400åƒç´  | 400åƒç´  | å…è®¸è¶…å‡ºè¾¹è· |
| 22è¡Œæ‰€éœ€é«˜åº¦ | 22 Ã— 18 = 396åƒç´  | 396åƒç´  | 22è¡Œæ€»é«˜åº¦ |
| 22è¡Œåº•éƒ¨ä½ç½® | 5 + 21Ã—18 + 16 = 399åƒç´  | 399åƒç´  | ç¬¬22è¡Œæ–‡å­—åº•éƒ¨ |

### ğŸ¯ æ˜¾ç¤ºæ•ˆæœå¯¹æ¯”

| é…ç½®æ–¹æ¡ˆ | å­—ç¬¦æ•° | æ˜¾ç¤ºæ•ˆç‡ | è§†è§‰æ•ˆæœ | é€‚ç”¨åœºæ™¯ |
|----------|--------|----------|----------|----------|
| 21è¡Œæ ‡å‡† | 756å­—ç¬¦ | 94.5% | å®Œç¾å¯¹é½ | æ­£å¼æ–‡æ¡£ |
| 22è¡Œæé™ | 792å­—ç¬¦ | 99.0% | è½»å¾®è¶…å‡º | ä¿¡æ¯å¯†é›† |
| æ— è¾¹è·æé™ | 814å­—ç¬¦ | 101.8% | å®Œå…¨å¡«æ»¡ | æµ‹è¯•ç”¨é€” |

### ğŸ”§ è¾¹ç•Œæ£€æŸ¥é€»è¾‘

| æ£€æŸ¥ç±»å‹ | åŸå§‹é€»è¾‘ | ä¼˜åŒ–é€»è¾‘ | æ•ˆæœ |
|----------|----------|----------|------|
| è¾¹ç•Œæ¡ä»¶ | y + 16 â‰¤ 395 | y + 16 â‰¤ 400 | å…è®¸ç¬¬22è¡Œæ˜¾ç¤º |
| ç¬¬22è¡ŒYåæ ‡ | 383åƒç´  | 383åƒç´  | ä¸å˜ |
| ç¬¬22è¡Œåº•éƒ¨ | 399åƒç´  | 399åƒç´  | ä¸å˜ |
| è¾¹ç•Œé™åˆ¶ | 395åƒç´  | 400åƒç´  | æ”¾å®½5åƒç´  |
| æ˜¾ç¤ºç»“æœ | ç¬¬22è¡Œè¢«æ‹¦æˆª | ç¬¬22è¡Œæ­£å¸¸æ˜¾ç¤º | âœ… æˆåŠŸ |

### âš¡ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | å•ä½ | è¯´æ˜ |
|------|------|------|------|
| å­—ç¬¦å¯†åº¦ | 6.6 | å­—ç¬¦/cmÂ² | æ¯å¹³æ–¹å˜ç±³å­—ç¬¦æ•° |
| ä¿¡æ¯å¯†åº¦ | 792 | å­—ç¬¦/å± | å•å±æœ€å¤§å­—ç¬¦æ•° |
| æ˜¾ç¤ºæ•ˆç‡ | 99.0% | - | 22è¡Œé…ç½®ä¸‹çš„ç©ºé—´åˆ©ç”¨ç‡ |
| åˆ·æ–°ç‡ | å–å†³äºSPI | Hz | ç”±SPIæ—¶é’Ÿé¢‘ç‡å†³å®š |
| åŠŸè€— | æä½ | mW | åå°„å¼LCDï¼Œæ— èƒŒå…‰ |

### ğŸ¨ å®é™…åº”ç”¨å»ºè®®

| åº”ç”¨ç±»å‹ | æ¨èé…ç½® | å­—ç¬¦æ•° | ä¼˜åŠ¿ |
|----------|----------|--------|------|
| æ–‡æ¡£é˜…è¯» | 21è¡Œæ ‡å‡† | 756å­—ç¬¦ | è§†è§‰èˆ’é€‚ï¼Œè¾¹è·åˆç† |
| ä¿¡æ¯æ˜¾ç¤º | 22è¡Œæé™ | 792å­—ç¬¦ | ä¿¡æ¯å¯†åº¦æœ€é«˜ |
| ç³»ç»Ÿç›‘æ§ | 22è¡Œæé™ | 792å­—ç¬¦ | æ˜¾ç¤ºæ›´å¤šçŠ¶æ€ä¿¡æ¯ |
| æµ‹è¯•éªŒè¯ | æ— è¾¹è·æé™ | 814å­—ç¬¦ | éªŒè¯ç¡¬ä»¶æé™ |

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ˜¾ç¤ºä¸å·¥ä½œï¼š**
   - éªŒè¯ç”µæºä¾›åº”ç¨³å®šåœ¨3.3V
   - æ£€æŸ¥æ‰€æœ‰å¼•è„šè¿æ¥
   - ç¡®ä¿SPIé…ç½®ä¸æ‚¨çš„ç¡¬ä»¶åŒ¹é…

2. **æ˜¾ç¤ºè´¨é‡å·®ï¼š**
   - æ£€æŸ¥åˆå§‹åŒ–åºåˆ—
   - éªŒè¯æ˜¾ç¤ºåŒºåŸŸé…ç½®
   - ç¡®è®¤åƒç´ å†™å…¥é€»è¾‘

3. **æ€§èƒ½é—®é¢˜ï¼š**
   - åœ¨é€‚å½“æ—¶ä½¿ç”¨ä½åŠŸè€—æ¨¡å¼
   - ä¼˜åŒ–SPIæ—¶é’Ÿé€Ÿåº¦
   - åœ¨ä¸ä½¿ç”¨æ˜¾ç¤ºæ—¶å¯ç”¨ç¡çœ æ¨¡å¼

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯·ç¡®ä¿æ‚¨çš„æäº¤ï¼š

1. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œçº¦å®š
2. åŒ…å«å…¨é¢çš„æ–‡æ¡£å’Œæ³¨é‡Š
3. æ·»åŠ é€‚å½“çš„æµ‹è¯•è¦†ç›–
4. æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚è¯¦è§[LICENSE](LICENSE)æ–‡ä»¶ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ã€å»ºè®®æˆ–éœ€è¦æ”¯æŒï¼š

- **é‚®ç®±**ï¼šyinyue@beingdigital.cn
- **é—®é¢˜åé¦ˆ**ï¼š[GitHub Issues](https://github.com/musicaJack/ST7305_2.9_Reflective_Lcd/issues)

## ğŸ™ è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰ä¸ºæ”¹è¿›è¿™ä¸ªåº“å¹¶ä½¿å…¶æ›´æ˜“äºåˆ›å®¢ç¤¾åŒºä½¿ç”¨è€Œè´¡çŒ®åŠ›é‡çš„äººã€‚

## ç¡¬ä»¶é…ç½®

### SPIå¼•è„šé…ç½®
SPIå¼•è„šé…ç½®å·²é›†ä¸­åœ¨ `include/spi_config.hpp` æ–‡ä»¶ä¸­ã€‚æ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„ç¡¬ä»¶è®¾ç½®ä¿®æ”¹è¿™äº›å¼•è„šï¼š

```cpp
#define SPI_PORT spi0
#define PIN_DC   20
#define PIN_RST  15
#define PIN_CS   17
#define PIN_SCLK 18
#define PIN_SDIN 19
```

## åŠŸèƒ½åˆ†ç±»

### æ ¸å¿ƒåŠŸèƒ½
è¿™äº›æ˜¯ç»è¿‡å……åˆ†æµ‹è¯•å¹¶åœ¨ç¤ºä¾‹ä¸­å¹¿æ³›ä½¿ç”¨çš„å¸¸ç”¨åŠŸèƒ½ï¼š

#### æ˜¾ç¤ºæ§åˆ¶
- `clearDisplay()` - æ¸…é™¤æ˜¾ç¤ºç¼“å†²åŒº
- `display()` - æ›´æ–°ç‰©ç†æ˜¾ç¤º
- `displayOn()` - å¼€å¯/å…³é—­æ˜¾ç¤º
- `displaySleep()` - è®¾ç½®æ˜¾ç¤ºç¡çœ æ¨¡å¼
- `displayInversion()` - è®¾ç½®æ˜¾ç¤ºåè½¬æ¨¡å¼

#### åŸºç¡€ç»˜å›¾
- `drawPixel()` / `drawPixelGray()` - ç»˜åˆ¶å•ä¸ªåƒç´ 
- `drawLine()` - ç»˜åˆ¶ç›´çº¿
- `drawCircle()` / `drawFilledCircle()` - ç»˜åˆ¶åœ†å½¢
- `drawString()` / `drawChar()` - ç»˜åˆ¶æ–‡å­—

### æ‰©å±•åŠŸèƒ½
è¿™äº›åŠŸèƒ½è™½ç„¶å¯ç”¨ï¼Œä½†åœ¨å½“å‰ç¤ºä¾‹ä¸­æœªè¢«å¹¿æ³›ä½¿ç”¨ã€‚å®ƒä»¬ä¸ºæœªæ¥æ‰©å±•æä¾›äº†å¯èƒ½ï¼š

#### é«˜çº§å›¾å½¢
- `drawTriangle()` / `drawFilledTriangle()` - ç»˜åˆ¶ä¸‰è§’å½¢
- `drawPolygon()` / `drawFilledPolygon()` - ç»˜åˆ¶å¤šè¾¹å½¢
- `drawRectangle()` / `drawFilledRectangle()` - ç»˜åˆ¶çŸ©å½¢

### ç¤ºä¾‹åˆ†ç±»

#### åŸºç¡€ç¤ºä¾‹
- `st7305_demo.cpp` - ST7305åŸºç¡€ç»˜å›¾æ¼”ç¤º
- `st7306_demo.cpp` - ST7306åŸºç¡€ç»˜å›¾æ¼”ç¤º

#### ç½‘ç»œç¤ºä¾‹
- `analog_clock_wifi.cpp` - æ”¯æŒWiFiçš„NTPæ—¶é’Ÿ

#### æ¸¸æˆç¤ºä¾‹
- `maze_game.cpp` - å¸¦æ‘‡æ†æ§åˆ¶çš„äº¤äº’å¼è¿·å®«æ¸¸æˆ

## è¿·å®«æ¸¸æˆç¤ºä¾‹

### æ¸¸æˆæ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäºST7306æ˜¾ç¤ºå±å’Œjoystickæ§åˆ¶å™¨çš„è¿·å®«æ¸¸æˆã€‚ç©å®¶éœ€è¦é¢„å…ˆè§„åˆ’è·¯å¾„ï¼Œç„¶åè§‚çœ‹å°äººæŒ‰ç…§è§„åˆ’çš„è·¯å¾„åœ¨è¿·å®«ä¸­ç§»åŠ¨ã€‚

### ç¡¬ä»¶è¦æ±‚
- æ ‘è“æ´¾Picoå¼€å‘æ¿
- ST7306åå°„å¼LCDæ˜¾ç¤ºå±
- Joystickæ§åˆ¶å™¨ï¼ˆI2Cæ¥å£ï¼‰

### ç¡¬ä»¶è¿æ¥

#### ST7306æ˜¾ç¤ºå±è¿æ¥
```
æ ‘è“æ´¾Pico              ST7306æ˜¾ç¤ºå±
+---------------+         +---------------+
|  GPIO18 (SCK) |-------->| SCK          |
|  GPIO19 (MOSI)|-------->| MOSI         |
|  GPIO17 (CS)  |-------->| CS           |
|  GPIO20 (DC)  |-------->| DC           |
|  GPIO15 (RST) |-------->| RST          |
|  3.3V         |-------->| VCC          |
|  GND          |-------->| GND          |
+---------------+         +---------------+
```

#### Joystickè¿æ¥
```
æ ‘è“æ´¾Pico              Joystick
+---------------+         +---------------+
|  GPIO6 (SDA)  |-------->| SDA          |
|  GPIO7 (SCL)  |-------->| SCL          |
|  3.3V         |-------->| VCC          |
|  GND          |-------->| GND          |
+---------------+         +---------------+
```

### æ¸¸æˆè§„åˆ™
1. **è¿·å®«ç”Ÿæˆ**ï¼šæ¸¸æˆå¼€å§‹æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºè¿·å®«
2. **è·¯å¾„è§„åˆ’**ï¼šä½¿ç”¨joystickçš„æ–¹å‘æ§åˆ¶ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰æ¥é¢„å…ˆè§„åˆ’å°äººçš„ç§»åŠ¨è·¯å¾„
3. **å¼€å§‹æ¸¸æˆ**ï¼šæŒ‰ä¸‹joystickçš„ä¸­é—´æŒ‰é’®ï¼ˆMIDé”®ï¼‰å¼€å§‹æ‰§è¡Œè§„åˆ’çš„è·¯å¾„
4. **ç§»åŠ¨åé¦ˆ**ï¼šå°äººæ¯èµ°ä¸€æ­¥ï¼Œjoystickä¸Šçš„è“è‰²LEDä¼šé—ªçƒä¸€æ¬¡
5. **èƒœåˆ©æ¡ä»¶**ï¼šå°äººæŒ‰ç…§è§„åˆ’è·¯å¾„æˆåŠŸåˆ°è¾¾è¿·å®«å‡ºå£ï¼Œç»¿è‰²LEDé—ªçƒ3ç§’
6. **å¤±è´¥æ¡ä»¶**ï¼šå°äººæ’å¢™æˆ–è·¯å¾„ç”¨å®Œä½†æœªåˆ°è¾¾å‡ºå£ï¼Œçº¢è‰²LEDé—ªçƒ3ç§’

### æ“ä½œè¯´æ˜

#### è·¯å¾„è§„åˆ’é˜¶æ®µ
- **ä¸Š/ä¸‹/å·¦/å³**ï¼šæ·»åŠ å¯¹åº”æ–¹å‘çš„ç§»åŠ¨æŒ‡ä»¤åˆ°è·¯å¾„ä¸­
- **MIDé”®**ï¼šå¼€å§‹æ‰§è¡Œè§„åˆ’çš„è·¯å¾„ï¼ˆéœ€è¦è‡³å°‘è§„åˆ’ä¸€æ­¥ï¼‰

#### æ¸¸æˆè¿è¡Œé˜¶æ®µ
- å°äººä¼šæŒ‰ç…§è§„åˆ’çš„è·¯å¾„è‡ªåŠ¨ç§»åŠ¨
- æ¯500msæ‰§è¡Œä¸€æ­¥ç§»åŠ¨
- å±å¹•ä¼šæ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„æ­¥éª¤

#### æ¸¸æˆç»“æŸé˜¶æ®µ
- **èƒœåˆ©**ï¼šæ˜¾ç¤º"YOU WIN!"ï¼Œjoystick LEDå˜ç»¿
- **å¤±è´¥**ï¼šæ˜¾ç¤º"YOU LOST!"ï¼Œjoystick LEDå˜çº¢
- **MIDé”®**ï¼šé‡æ–°å¼€å§‹æ–°æ¸¸æˆ

### æ˜¾ç¤ºè¯´æ˜
- **é»‘è‰²æ–¹å—**ï¼šå¢™å£ï¼ˆä¸å¯é€šè¿‡ï¼‰
- **ç™½è‰²åŒºåŸŸ**ï¼šé€šè·¯ï¼ˆå¯ä»¥é€šè¿‡ï¼‰
- **æµ…ç°è‰²**ï¼šèµ·ç‚¹ä½ç½®
- **æ·±ç°è‰²**ï¼šç»ˆç‚¹ä½ç½®
- **é»‘è‰²å°ç‚¹**ï¼šå°äººå½“å‰ä½ç½®ï¼ˆæ¸¸æˆè¿è¡Œæ—¶ï¼‰

### LEDæŒ‡ç¤º
- **ç»¿è‰²**ï¼šjoystickåˆå§‹åŒ–æˆåŠŸï¼ˆäº®1ç§’åå…³é—­ï¼‰
- **è“è‰²**ï¼šæ£€æµ‹åˆ°æ“ä½œï¼ˆæ–¹å‘è¾“å…¥æˆ–æŒ‰é’®æŒ‰ä¸‹ï¼‰
- **è“è‰²é—ªçƒ**ï¼šå°äººæ¯èµ°ä¸€æ­¥æ—¶é—ªçƒä¸€æ¬¡
- **ç»¿è‰²é—ªçƒ3ç§’**ï¼šæˆåŠŸèµ°å‡ºè¿·å®«
- **çº¢è‰²é—ªçƒ3ç§’**ï¼šæ¸¸æˆå¤±è´¥ï¼ˆæ’å¢™æˆ–æœªåˆ°è¾¾ç»ˆç‚¹ï¼‰
- **å…³é—­**ï¼šæ— æ“ä½œçŠ¶æ€æˆ–æ“ä½œç»“æŸå

### æŠ€æœ¯ç‰¹æ€§
- **è¿·å®«ç”Ÿæˆç®—æ³•**ï¼šé€’å½’å›æº¯ç®—æ³•ç”Ÿæˆéšæœºè¿·å®«
- **è·¯å¾„éªŒè¯**ï¼šBFSç®—æ³•ç¡®ä¿è¿·å®«æœ‰è§£
- **è¾“å…¥é˜²æŠ–**ï¼š300msé˜²æŠ–æ—¶é—´é¿å…è¯¯è§¦
- **è§†è§‰åé¦ˆ**ï¼šLEDé¢œè‰²å˜åŒ–å’Œå±å¹•æ˜¾ç¤ºæä¾›å®æ—¶åé¦ˆ
- **é”™è¯¯å¤„ç†**ï¼šè‡ªåŠ¨å¤„ç†æ— æ•ˆç§»åŠ¨å’Œè¾¹ç•Œæ£€æŸ¥

### æ•…éšœæ’é™¤
1. **æ˜¾ç¤ºå±æ— æ˜¾ç¤º**ï¼šæ£€æŸ¥SPIè¿æ¥å’Œç”µæº
2. **Joystickæ— å“åº”**ï¼šæ£€æŸ¥I2Cè¿æ¥å’Œåœ°å€é…ç½®
3. **æ¸¸æˆå¡æ­»**ï¼šé‡å¯è®¾å¤‡ï¼Œæ£€æŸ¥ä¸²å£è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
4. **è·¯å¾„æ£€æµ‹ä¸å‡†ç¡®**ï¼šè°ƒæ•´joystickçš„é˜ˆå€¼å‚æ•° 

## ğŸ“š é™„åŠ æ–‡æ¡£

### ğŸ® è¿·å®«æ¸¸æˆæ›´æ–°è¯´æ˜

#### ç‰ˆæœ¬ 2.5.0 æ›´æ–°å†…å®¹

##### ç»å…¸é€’å½’å›æº¯ç®—æ³• â­
- **ç”¨æˆ·åé¦ˆ**: æ ¹æ®ç”¨æˆ·å»ºè®®ï¼Œè¿˜åŸåˆ°å‰é¢ç‰ˆæœ¬çš„ç»å…¸è¿·å®«ç”Ÿæˆç®—æ³•
- **ç®—æ³•ç‰¹ç‚¹**: ä½¿ç”¨é€’å½’å›æº¯ç®—æ³•ç”Ÿæˆä¼ ç»Ÿè¿·å®«ç»“æ„
- **è¿·å®«è´¨é‡**: ç”Ÿæˆå…·æœ‰ç»å…¸è¿·å®«ç‰¹å¾çš„å¸ƒå±€ï¼Œæœ‰æ›´å¥½çš„è¿·å®«æ„Ÿ
- **ä¿ç•™æ”¹è¿›**: ç»´æŒæ­¥æ•°éªŒè¯å’Œè¾¹ç•Œæ£€æŸ¥ç­‰æŠ€æœ¯æ”¹è¿›

##### ä¿ç•™çš„æŠ€æœ¯æ”¹è¿›
- **æ­¥æ•°éªŒè¯**: ä¿ç•™BFSéªŒè¯æœºåˆ¶ï¼Œç¡®ä¿è¿·å®«ç¬¦åˆéš¾åº¦è¦æ±‚
- **å¤šæ¬¡å°è¯•**: æœ€å¤šå°è¯•20æ¬¡ç”Ÿæˆç¬¦åˆè¦æ±‚çš„è¿·å®«
- **è¾¹ç•Œæ£€æŸ¥**: ä¿ç•™æ‰€æœ‰è¾¹ç•Œæ£€æŸ¥ï¼Œç¡®ä¿æ— ç¼–è¯‘è­¦å‘Š
- **å¤‡ç”¨æ–¹æ¡ˆ**: å¦‚æœé€’å½’å›æº¯å¤±è´¥ï¼Œä½¿ç”¨ç®€å•è·¯å¾„ä½œä¸ºå¤‡ç”¨

##### é€’å½’å›æº¯ç®—æ³•
```
1. ä»èµ·ç‚¹å¼€å§‹ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®
2. éšæœºé€‰æ‹©ä¸€ä¸ªæœªè®¿é—®çš„é‚»å±…ï¼ˆé—´éš”2æ ¼ï¼‰
3. ç§»é™¤å½“å‰ä½ç½®å’Œé‚»å±…ä¹‹é—´çš„å¢™å£
4. é€’å½’è®¿é—®é‚»å±…
5. å¦‚æœæ²¡æœ‰æœªè®¿é—®é‚»å±…ï¼Œå›æº¯åˆ°ä¸Šä¸€ä¸ªä½ç½®
6. é‡å¤ç›´åˆ°æ‰€æœ‰å¯è¾¾ä½ç½®éƒ½è¢«è®¿é—®
```

##### ç®—æ³•ä¼˜åŠ¿
- **ç»å…¸ç»“æ„**: ç”Ÿæˆä¼ ç»Ÿè¿·å®«çš„åˆ†æ”¯å’Œæ­»èƒ¡åŒç»“æ„
- **éšæœºæ€§**: æ¯æ¬¡ç”Ÿæˆä¸åŒçš„è¿·å®«å¸ƒå±€
- **è¿é€šæ€§**: ç¡®ä¿ä»èµ·ç‚¹åˆ°ç»ˆç‚¹æœ‰è·¯å¾„
- **æŒ‘æˆ˜æ€§**: æä¾›çœŸæ­£çš„è¿·å®«æ¢ç´¢ä½“éªŒ

##### æŠ€æœ¯å®ç°

###### æ ¸å¿ƒå‡½æ•°
- `generateMaze()`: ä¸»è¿·å®«ç”Ÿæˆå™¨ï¼ŒåŒ…å«éªŒè¯é€»è¾‘
- `generateBasicMaze()`: é€’å½’å›æº¯è¿·å®«ç”Ÿæˆ
- `getUnvisitedNeighbors()`: è·å–æœªè®¿é—®çš„é‚»å±…èŠ‚ç‚¹
- `validateMazeSteps()`: BFSæ­¥æ•°éªŒè¯ç®—æ³•
- `generateOptimizedMaze()`: ç®€å•è·¯å¾„å¤‡ç”¨æ–¹æ¡ˆ
- `addEntranceExits()`: å…¥å£å‡ºå£å¼€å£ç”Ÿæˆ

###### ä¿ç•™çš„æ”¹è¿›
- **æ— ç¼–è¯‘è­¦å‘Š**: æ‰€æœ‰æ•°ç»„è®¿é—®éƒ½æœ‰è¾¹ç•Œæ£€æŸ¥
- **æ­¥æ•°ç²¾ç¡®**: ç¡®ä¿ç”Ÿæˆçš„è¿·å®«ç¬¦åˆéš¾åº¦æ­¥æ•°è¦æ±‚
- **å¤šæ¬¡å°è¯•**: æé«˜ç”Ÿæˆç¬¦åˆè¦æ±‚è¿·å®«çš„æˆåŠŸç‡
- **æ™ºèƒ½å¤‡ç”¨**: é€’å½’å›æº¯å¤±è´¥æ—¶æœ‰ç®€å•è·¯å¾„ä¿åº•

##### è¿·å®«ç‰¹ç‚¹

###### Level 5 (20æ­¥ï¼Œ27x27è¿·å®«)
- **ç»å…¸ç»“æ„**: ä¼ ç»Ÿé€’å½’å›æº¯ç®—æ³•ç”Ÿæˆçš„è¿·å®«å¸ƒå±€
- **åˆ†æ”¯è·¯å¾„**: åŒ…å«å¤šä¸ªåˆ†æ”¯å’Œæ­»èƒ¡åŒ
- **æ¢ç´¢æ€§**: éœ€è¦ç­–ç•¥æ€è€ƒå’Œè·¯å¾„è§„åˆ’
- **æŒ‘æˆ˜æ€§**: åœ¨20æ­¥é™åˆ¶å†…æ‰¾åˆ°æœ€ä¼˜è·¯å¾„

##### è°ƒè¯•è®¾ç½®

å½“å‰è®¾ç½®ä¸ºLevel 5 (æœ€é«˜éš¾åº¦):
```cpp
#define DIFFICULTY_LEVEL 5  // å½“å‰éš¾åº¦çº§åˆ«
```

å„éš¾åº¦çº§åˆ«è®¾ç½®ï¼š
- **Level 1**: 5æ­¥ï¼Œ11x11è¿·å®«
- **Level 2**: 8æ­¥ï¼Œ15x15è¿·å®«  
- **Level 3**: 12æ­¥ï¼Œ19x19è¿·å®«
- **Level 4**: 15æ­¥ï¼Œ23x23è¿·å®«
- **Level 5**: 20æ­¥ï¼Œ27x27è¿·å®« âœ… **å½“å‰è®¾ç½®**

##### è°ƒè¯•ä¿¡æ¯

æ¸¸æˆå¯åŠ¨æ—¶ä¼šåœ¨ä¸²å£è¾“å‡ºä¿¡æ¯ï¼š
```
Attempt 1: Maze requires too many steps, regenerating...
Attempt 3: Maze requires minimum 19 steps (limit: 20)
Generated valid maze in 3 attempts
```

æˆ–è€…ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆï¼š
```
Failed to generate random maze, creating optimized maze
Generated optimized maze targeting 20 steps
```

### ğŸŒ ä¸­æ–‡å­—ä½“æ¸²æŸ“ API

è¿™æ˜¯ä¸€ä¸ªä¸º ST73xx ç³»åˆ— LCD æ˜¾ç¤ºå™¨è®¾è®¡çš„ä¸­æ–‡å­—ä½“æ¸²æŸ“åº“ï¼Œæä¾›äº†æ¨¡æ¿åŒ–ã€å¯æ‰©å±•çš„å­—ä½“æ¸²æŸ“è§£å†³æ–¹æ¡ˆã€‚

#### ç‰¹æ€§

- ğŸ¯ **æ¨¡æ¿åŒ–è®¾è®¡**ï¼šæ”¯æŒä¸åŒçš„æ˜¾ç¤ºé©±åŠ¨
- ğŸŒ **UTF-8 æ”¯æŒ**ï¼šå®Œæ•´çš„ä¸­è‹±æ–‡æ··åˆæ–‡æœ¬æ¸²æŸ“
- ğŸ”§ **å¯æ‰©å±•æ¶æ„**ï¼šæ”¯æŒå¤šç§å­—ä½“æ•°æ®æº
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå¥å£®çš„é”™è¯¯æ£€æŸ¥å’Œæ¢å¤æœºåˆ¶
- ğŸ“Š **è°ƒè¯•æ”¯æŒ**ï¼šå†…ç½®å­—ç¬¦ç‚¹é˜µè°ƒè¯•åŠŸèƒ½

#### æ–‡ä»¶ç»“æ„

```
include/
â”œâ”€â”€ st73xx_font_cn.hpp      # ä¸»å¤´æ–‡ä»¶
â””â”€â”€ st73xx_font_cn.inl      # å†…è”å®ç°

src/
â””â”€â”€ st73xx_font_cn.cpp      # å·¥å…·å‡½æ•°å®ç°

examples/
â””â”€â”€ chinese_font_test.cpp   # ç»¼åˆæµ‹è¯•æ–‡ä»¶
```

#### å¿«é€Ÿå¼€å§‹

##### åŸºæœ¬ä½¿ç”¨

```cpp
#include "st7306_driver.hpp"
#include "st73xx_font_cn.hpp"

int main() {
    // åˆ›å»ºå­—ä½“ç®¡ç†å™¨
    st73xx_font_cn::FontManager<st7306::ST7306Driver> font_mgr;
    
    // åˆå§‹åŒ–å­—ä½“æ•°æ®
    const uint8_t* font_data = (const uint8_t*)st73xx_font_cn::DEFAULT_FONT_ADDRESS;
    font_mgr.initialize(font_data);
    
    // åˆå§‹åŒ–æ˜¾ç¤ºé©±åŠ¨
    st7306::ST7306Driver lcd(PIN_DC, PIN_RST, PIN_CS, PIN_SCLK, PIN_SDIN);
    lcd.initialize();
    
    // ç»˜åˆ¶æ–‡æœ¬
    font_mgr.draw_string(lcd, 10, 10, "Hello World", true);
    font_mgr.draw_string(lcd, 10, 30, "ä½ å¥½ä¸–ç•Œ", true);
    lcd.display();
    
    return 0;
}
```

##### é«˜çº§ä½¿ç”¨

```cpp
// ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“æ•°æ®æº
st73xx_font_cn::FlashFontDataSource font_source(custom_font_data);
st73xx_font_cn::FontRenderer16x16<st7306::ST7306Driver> renderer(&font_source);

// ç»˜åˆ¶å•ä¸ªå­—ç¬¦
renderer.draw_char(lcd, 10, 10, 'A', true);
renderer.draw_char(lcd, 30, 10, 0x4E2D, true);  // "ä¸­"
```

#### API å‚è€ƒ

##### FontManager ç±»

ä¸»è¦çš„å­—ä½“ç®¡ç†ç±»ï¼Œæä¾›ç®€åŒ–çš„æ¥å£ã€‚

###### æ„é€ å‡½æ•°
```cpp
FontManager(const uint8_t* font_data = nullptr)
```

###### æ–¹æ³•
- `bool initialize(const uint8_t* font_data = nullptr)` - åˆå§‹åŒ–å­—ä½“
- `bool verify_font() const` - éªŒè¯å­—ä½“æ•°æ®
- `void draw_char(DisplayDriver& display, int x, int y, uint32_t char_code, bool color)` - ç»˜åˆ¶å•ä¸ªå­—ç¬¦
- `void draw_string(DisplayDriver& display, int x, int y, const char* str, bool color)` - ç»˜åˆ¶å­—ç¬¦ä¸²
- `uint16_t get_font_version() const` - è·å–å­—ä½“ç‰ˆæœ¬
- `uint16_t get_total_chars() const` - è·å–å­—ç¬¦æ€»æ•°
- `void print_char_bitmap(uint32_t char_code) const` - æ‰“å°å­—ç¬¦ç‚¹é˜µï¼ˆè°ƒè¯•ç”¨ï¼‰

##### IFontDataSource æ¥å£

å­—ä½“æ•°æ®æºæ¥å£ï¼Œå¯ä»¥æ‰©å±•æ”¯æŒä¸åŒçš„æ•°æ®æºã€‚

###### çº¯è™šå‡½æ•°
- `const uint8_t* get_char_bitmap(uint32_t char_code) const` - è·å–å­—ç¬¦ç‚¹é˜µ
- `bool verify_header() const` - éªŒè¯æ–‡ä»¶å¤´
- `uint16_t get_version() const` - è·å–ç‰ˆæœ¬å·
- `uint16_t get_total_chars() const` - è·å–å­—ç¬¦æ€»æ•°

##### FlashFontDataSource ç±»

Flash å†…å­˜å­—ä½“æ•°æ®æºå®ç°ã€‚

###### æ„é€ å‡½æ•°
```cpp
FlashFontDataSource(const uint8_t* font_data = nullptr)
```

###### æ–¹æ³•
- `void set_font_data(const uint8_t* font_data)` - è®¾ç½®å­—ä½“æ•°æ®åœ°å€

##### IFontRenderer æ¥å£

å­—ä½“æ¸²æŸ“å™¨æ¥å£ï¼Œæ”¯æŒä¸åŒçš„æ¸²æŸ“ç®—æ³•ã€‚

###### çº¯è™šå‡½æ•°
- `void draw_char(DisplayDriver& display, int x, int y, uint32_t char_code, bool color)` - ç»˜åˆ¶å­—ç¬¦
- `void draw_string(DisplayDriver& display, int x, int y, const char* str, bool color)` - ç»˜åˆ¶å­—ç¬¦ä¸²

##### FontRenderer16x16 ç±»

16x16 åƒç´ å­—ä½“æ¸²æŸ“å™¨å®ç°ã€‚

###### æ„é€ å‡½æ•°
```cpp
FontRenderer16x16(const IFontDataSource* font_source = nullptr)
```

###### æ–¹æ³•
- `void set_font_source(const IFontDataSource* font_source)` - è®¾ç½®å­—ä½“æ•°æ®æº
- `const IFontDataSource* get_font_source() const` - è·å–å­—ä½“æ•°æ®æº

#### æ”¯æŒçš„å­—ç¬¦ç±»å‹

- **ASCII å­—ç¬¦** (0x20-0x7E): 95ä¸ªå­—ç¬¦ï¼ŒåŒ…å«ç©ºæ ¼
- **å…¨è§’æ ‡ç‚¹ç¬¦å·** (0x3000-0x303F): 64ä¸ªå­—ç¬¦
- **å…¨è§’å­—ç¬¦** (0xFF00-0xFFEF): 240ä¸ªå­—ç¬¦
- **ä¸­æ–‡å­—ç¬¦** (0x4E00-0x9FA5): 28,648ä¸ªå­—ç¬¦

#### å­—ä½“æ–‡ä»¶æ ¼å¼

å­—ä½“æ–‡ä»¶åº”åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š
- æ–‡ä»¶å¤´ (4å­—èŠ‚): ç‰ˆæœ¬å·(2å­—èŠ‚) + å­—ç¬¦æ€»æ•°(2å­—èŠ‚)
- å­—ç¬¦æ•°æ®: æ¯ä¸ªå­—ç¬¦32å­—èŠ‚ (16x16åƒç´ )

#### ç¼–è¯‘é…ç½®

åœ¨ CMakeLists.txt ä¸­æ·»åŠ ï¼š

```cmake
# æ·»åŠ æºæ–‡ä»¶
add_executable(YourApp
    your_main.cpp
    src/st7306_driver.cpp
    src/st73xx_font_cn.cpp
)

# æ·»åŠ åŒ…å«ç›®å½•
target_include_directories(YourApp PRIVATE
    ${CMAKE_CURRENT_LIST_DIR}/include
)

# é“¾æ¥åº“
target_link_libraries(YourApp PUBLIC
    pico_stdlib
    hardware_spi
    hardware_gpio
    pico_stdio_usb
)
```

#### é”™è¯¯å¤„ç†

API æä¾›äº†å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

```cpp
// æ£€æŸ¥å­—ä½“åˆå§‹åŒ–
if (!font_mgr.initialize(font_data)) {
    printf("Font initialization failed!\n");
    return -1;
}

// éªŒè¯å­—ä½“æ•°æ®
if (!font_mgr.verify_font()) {
    printf("Font verification failed!\n");
    return -1;
}

// å®‰å…¨çš„ç»˜åˆ¶è°ƒç”¨ï¼ˆå³ä½¿å­—ä½“æœªåˆå§‹åŒ–ä¹Ÿä¸ä¼šå´©æºƒï¼‰
font_mgr.draw_string(lcd, 10, 10, "Test", true);
```

#### è°ƒè¯•åŠŸèƒ½

```cpp
// æ‰“å°å­—ä½“ä¿¡æ¯
printf("Font Version: %d\n", font_mgr.get_font_version());
printf("Total Characters: %d\n", font_mgr.get_total_chars());

// æ‰“å°å­—ç¬¦ç‚¹é˜µ
font_mgr.print_char_bitmap('A');
font_mgr.print_char_bitmap(0x4E2D);  // "ä¸­"
```

#### æ‰©å±•æ€§

##### æ·»åŠ æ–°çš„å­—ä½“æ•°æ®æº

```cpp
class SDCardFontDataSource : public IFontDataSource {
public:
    const uint8_t* get_char_bitmap(uint32_t char_code) const override {
        // ä»SDå¡è¯»å–å­—ä½“æ•°æ®
        return read_from_sd_card(char_code);
    }
    
    bool verify_header() const override {
        // éªŒè¯SDå¡ä¸Šçš„å­—ä½“æ–‡ä»¶
        return verify_sd_font_file();
    }
    
    // ... å…¶ä»–æ–¹æ³•å®ç°
};
```

##### æ·»åŠ æ–°çš„æ¸²æŸ“å™¨

```cpp
template<typename DisplayDriver>
class FontRenderer24x24 : public IFontRenderer<DisplayDriver> {
public:
    void draw_char(DisplayDriver& display, int x, int y, uint32_t char_code, bool color) override {
        // 24x24åƒç´ æ¸²æŸ“å®ç°
    }
    
    void draw_string(DisplayDriver& display, int x, int y, const char* str, bool color) override {
        // å­—ç¬¦ä¸²æ¸²æŸ“å®ç°
    }
};
```

#### ç¤ºä¾‹ç¨‹åº

- `chinese_font_test.cpp`: ç»¼åˆæµ‹è¯•ç¨‹åº

#### æ³¨æ„äº‹é¡¹

1. ç¡®ä¿å­—ä½“æ–‡ä»¶å·²æ­£ç¡®åŠ è½½åˆ° Flash åœ°å€ 0x10100000
2. å­—ä½“æ–‡ä»¶æ ¼å¼å¿…é¡»ç¬¦åˆè§„èŒƒ
3. æ˜¾ç¤ºé©±åŠ¨å¿…é¡»å®ç° `drawPixel(x, y, color)` æ–¹æ³•
4. UTF-8 ç¼–ç çš„å­—ç¬¦ä¸²ä¼šè‡ªåŠ¨è§£ç 

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼Œè¯·åœ¨ GitHub ä¸Šæäº¤ issueã€‚ 